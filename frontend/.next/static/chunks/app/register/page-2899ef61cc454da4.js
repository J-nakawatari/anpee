(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{5196:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},15532:(e,s,t)=>{Promise.resolve().then(t.bind(t,86616))},19420:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},25731:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(23464),r=t(57383);let l=t(49509).env.NEXT_PUBLIC_API_URL||"http://localhost:4003/api/v1",c=a.A.create({baseURL:l,withCredentials:!0,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(e=>{let s=localStorage.getItem("accessToken");s&&(e.headers.Authorization="Bearer ".concat(s));let t=r.A.get("csrf-token");return t&&(e.headers["X-CSRF-Token"]=t),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{var s;let t=e.config;if((null==(s=e.response)?void 0:s.status)===401&&!t._retry){t._retry=!0;try{let{accessToken:e}=(await c.post("/auth/refresh")).data.data;return localStorage.setItem("accessToken",e),c(t)}catch(e){return localStorage.removeItem("accessToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let n={login:async(e,s)=>(await c.post("/auth/login",{email:e,password:s})).data,register:async e=>(await c.post("/auth/register",e)).data,logout:async()=>{let e=await c.post("/auth/logout");return localStorage.removeItem("accessToken"),e.data},forgotPassword:async e=>(await c.post("/auth/forgot-password",{email:e})).data,resetPassword:async(e,s)=>(await c.post("/auth/reset-password",{token:e,password:s})).data}},28883:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},32919:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},71007:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},86616:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(95155),r=t(12115),l=t(35695),c=t(6874),n=t.n(c),i=t(62177),o=t(90221),d=t(68309),m=t(25731),h=t(5196),x=t(51976),u=t(71007),p=t(28883),f=t(19420),j=t(32919),g=t(51154);let b=d.Ik({name:d.Yj().min(1,"名前を入力してください").max(50,"名前は50文字以内で入力してください"),email:d.Yj().email("有効なメールアドレスを入力してください"),phone:d.Yj().regex(/^[0-9-]+$/,"有効な電話番号を入力してください").min(10,"電話番号は10桁以上で入力してください"),password:d.Yj().min(8,"パスワードは8文字以上で入力してください").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"パスワードは大文字・小文字・数字を含む必要があります"),confirmPassword:d.Yj().min(1,"パスワード（確認）を入力してください"),agreeToTerms:d.zM().refine(e=>!0===e,"利用規約への同意が必要です")}).refine(e=>e.password===e.confirmPassword,{message:"パスワードが一致しません",path:["confirmPassword"]});function y(){(0,l.useRouter)();let[e,s]=(0,r.useState)(!1),[t,c]=(0,r.useState)(""),[d,y]=(0,r.useState)(!1),{register:w,handleSubmit:N,formState:{errors:v}}=(0,i.mN)({resolver:(0,o.u)(b)}),k=async e=>{try{s(!0),c(""),(await m.Z.register({name:e.name,email:e.email,phone:e.phone,password:e.password})).success&&y(!0)}catch(e){var t,a;c((null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"登録に失敗しました。もう一度お試しください。")}finally{s(!1)}};return d?(0,a.jsx)("div",{className:"min-h-screen warm-gradient flex items-center justify-center px-4",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"cute-card text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:(0,a.jsx)(h.A,{className:"w-8 h-8 text-green-500"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-peach-700 mb-4",children:"登録が完了しました！"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["確認メールを送信しました。",(0,a.jsx)("br",{}),"メールに記載されたリンクから",(0,a.jsx)("br",{}),"アカウントを有効化してください。"]}),(0,a.jsx)(n(),{href:"/login",className:"cute-button inline-block",children:"ログインページへ"})]})})}):(0,a.jsx)("div",{className:"min-h-screen warm-gradient flex items-center justify-center px-4 py-8",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"cute-card",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-peach-100 rounded-full mb-4",children:(0,a.jsx)(x.A,{className:"w-8 h-8 text-peach-500"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-peach-700",children:"あんぴーちゃんに新規登録"}),(0,a.jsx)("p",{className:"text-peach-600 mt-2",children:"大切な家族を見守るサービス"})]}),t&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-cute text-sm",children:t}),(0,a.jsxs)("form",{onSubmit:N(k),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"お名前"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{...w("name"),type:"text",id:"name",className:"w-full pl-10 pr-3 py-2 border border-peach-200 rounded-cute focus:outline-none focus:ring-2 focus:ring-peach-500",placeholder:"山田 太郎",disabled:e})]}),v.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{...w("email"),type:"email",id:"email",className:"w-full pl-10 pr-3 py-2 border border-peach-200 rounded-cute focus:outline-none focus:ring-2 focus:ring-peach-500",placeholder:"your@email.com",disabled:e})]}),v.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"電話番号"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{...w("phone"),type:"tel",id:"phone",className:"w-full pl-10 pr-3 py-2 border border-peach-200 rounded-cute focus:outline-none focus:ring-2 focus:ring-peach-500",placeholder:"090-1234-5678",disabled:e})]}),v.phone&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.phone.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{...w("password"),type:"password",id:"password",className:"w-full pl-10 pr-3 py-2 border border-peach-200 rounded-cute focus:outline-none focus:ring-2 focus:ring-peach-500",placeholder:"8文字以上、大文字・小文字・数字を含む",disabled:e})]}),v.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.password.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード（確認）"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{...w("confirmPassword"),type:"password",id:"confirmPassword",className:"w-full pl-10 pr-3 py-2 border border-peach-200 rounded-cute focus:outline-none focus:ring-2 focus:ring-peach-500",placeholder:"パスワードを再入力",disabled:e})]}),v.confirmPassword&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.confirmPassword.message})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{...w("agreeToTerms"),type:"checkbox",id:"agreeToTerms",className:"mt-1 h-4 w-4 text-peach-600 focus:ring-peach-500 border-gray-300 rounded",disabled:e}),(0,a.jsxs)("label",{htmlFor:"agreeToTerms",className:"ml-2 text-sm text-gray-600",children:[(0,a.jsx)(n(),{href:"/terms",className:"text-peach-600 hover:text-peach-700",target:"_blank",children:"利用規約"}),"、",(0,a.jsx)(n(),{href:"/privacy",className:"text-peach-600 hover:text-peach-700",target:"_blank",children:"プライバシーポリシー"}),"に同意します"]})]}),v.agreeToTerms&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:v.agreeToTerms.message}),(0,a.jsx)("button",{type:"submit",disabled:e,className:"w-full cute-button disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2 animate-spin"}),"登録中..."]}):"新規登録"})]}),(0,a.jsxs)("div",{className:"mt-6 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"既にアカウントをお持ちの方は"}),(0,a.jsx)(n(),{href:"/login",className:"text-sm text-peach-600 hover:text-peach-700 font-medium",children:"ログインはこちら"})]})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)(n(),{href:"/",className:"text-sm text-peach-600 hover:text-peach-700",children:"トップページに戻る"})})]})})}}},e=>{e.O(0,[874,889,641,14,441,964,358],()=>e(e.s=15532)),_N_E=e.O()}]);