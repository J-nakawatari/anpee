(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},25731:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(23464),r=s(57383);let l=s(49509).env.NEXT_PUBLIC_API_URL||"http://localhost:4003/api/v1",c=a.A.create({baseURL:l,withCredentials:!0,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t));let s=r.A.get("csrf-token");return s&&(e.headers["X-CSRF-Token"]=s),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{var t;let s=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!s._retry){s._retry=!0;try{let{accessToken:e}=(await c.post("/auth/refresh")).data.data;return localStorage.setItem("accessToken",e),c(s)}catch(e){return localStorage.removeItem("accessToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let i={login:async(e,t)=>(await c.post("/auth/login",{email:e,password:t})).data,register:async e=>(await c.post("/auth/register",e)).data,logout:async()=>{let e=await c.post("/auth/logout");return localStorage.removeItem("accessToken"),e.data},forgotPassword:async e=>(await c.post("/auth/forgot-password",{email:e})).data,resetPassword:async(e,t)=>(await c.post("/auth/reset-password",{token:e,password:t})).data}},28883:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},35169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},60952:(e,t,s)=>{Promise.resolve().then(s.bind(s,69028))},69028:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(95155),r=s(12115),l=s(6874),c=s.n(l),i=s(62177),n=s(90221),d=s(68309),o=s(25731),m=s(5196),h=s(51976),x=s(28883),u=s(51154),p=s(35169);let j=d.Ik({email:d.Yj().email("有効なメールアドレスを入力してください")});function f(){let[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)(""),[d,f]=(0,r.useState)(!1),{register:g,handleSubmit:b,formState:{errors:y}}=(0,i.mN)({resolver:(0,n.u)(j)}),N=async e=>{try{t(!0),l(""),(await o.Z.forgotPassword(e.email)).success&&f(!0)}catch(e){var s,a;l((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"リクエストの処理中にエラーが発生しました。")}finally{t(!1)}};return d?(0,a.jsx)("div",{className:"min-h-screen warm-gradient flex items-center justify-center px-4",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"cute-card text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:(0,a.jsx)(m.A,{className:"w-8 h-8 text-green-500"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-peach-700 mb-4",children:"メールを送信しました"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["パスワードリセットの手順を記載したメールを送信しました。",(0,a.jsx)("br",{}),"メールボックスをご確認ください。"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["メールが届かない場合は、迷惑メールフォルダも",(0,a.jsx)("br",{}),"ご確認ください。"]}),(0,a.jsx)(c(),{href:"/login",className:"cute-button inline-block",children:"ログインページへ戻る"})]})})}):(0,a.jsx)("div",{className:"min-h-screen warm-gradient flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"cute-card",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-peach-100 rounded-full mb-4",children:(0,a.jsx)(h.A,{className:"w-8 h-8 text-peach-500"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-peach-700",children:"パスワードをお忘れの方"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["登録されたメールアドレスに",(0,a.jsx)("br",{}),"パスワードリセットの案内を送信します"]})]}),s&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-cute text-sm",children:s}),(0,a.jsxs)("form",{onSubmit:b(N),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{...g("email"),type:"email",id:"email",className:"w-full pl-10 pr-3 py-2 border border-peach-200 rounded-cute focus:outline-none focus:ring-2 focus:ring-peach-500",placeholder:"your@email.com",disabled:e})]}),y.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.email.message})]}),(0,a.jsx)("button",{type:"submit",disabled:e,className:"w-full cute-button disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2 animate-spin"}),"送信中..."]}):"リセットメールを送信"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(c(),{href:"/login",className:"flex items-center justify-center text-sm text-peach-600 hover:text-peach-700",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-1"}),"ログインページに戻る"]})})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)(c(),{href:"/",className:"text-sm text-peach-600 hover:text-peach-700",children:"トップページに戻る"})})]})})}}},e=>{e.O(0,[874,889,641,14,441,964,358],()=>e(e.s=60952)),_N_E=e.O()}]);